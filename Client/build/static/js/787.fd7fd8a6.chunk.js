"use strict";(self.webpackChunkmdb_react_template=self.webpackChunkmdb_react_template||[]).push([[787],{4787:function(e,t,n){n.r(t),n.d(t,{default:function(){return Q}});var r=n(4165),o=n(5861),a=n(2791),s=n(7689),i=n(9434),c=n(4942),l=n(1413),d=n(9439),u=n(319),p=(n(6672),n(9071)),h=n(1243),x=n(5218),m=n(184);function f(){var e=(0,i.I0)(),t=(0,a.useState)({email:"",password:""}),n=(0,d.Z)(t,2),s=n[0],f=n[1],g=(0,a.useState)(""),Z=(0,d.Z)(g,2),j=Z[0],v=Z[1],b=function(e){e.preventDefault();var t=e.target,n=t.name,r=t.value;f((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,c.Z)({},n,r))})),v("")},k=function(){var t=(0,o.Z)((0,r.Z)().mark((function t(n){var o,a,i,c;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),o=s.email,a=s.password,t.next=4,h.Z.post("worker/auth/login",{email:o,password:a});case 4:i=t.sent,(c=i.data).err?x.ZP.error(c.message):e({type:"refresh"});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,m.jsxs)("div",{className:"d-flex flex-column justify-content-center",style:{height:"100vh"},children:[(0,m.jsx)(x.x7,{}),(0,m.jsxs)(u.L5,{children:[(0,m.jsx)(u.TK,{col:"12",children:(0,m.jsx)("h1",{className:"text-left mb-4",children:"WORKER"})}),(0,m.jsxs)(u.uZ,{children:[(0,m.jsx)(u.TK,{col:"12",lg:"7",children:(0,m.jsx)("img",{src:p,alt:"Phone image",className:"img-fluid"})}),(0,m.jsx)(u.TK,{col:0,lg:1}),(0,m.jsx)(u.TK,{col:"12",lg:"4",className:"pt-5",children:(0,m.jsxs)("form",{children:[(0,m.jsx)("h3",{className:"w-100 text-center mb-5",children:"Login"}),(0,m.jsx)(u.u2,{wrapperClass:"mb-4",label:"Email address",type:"email",size:"lg",name:"email",value:s.email,onChange:b}),(0,m.jsx)(u.u2,{wrapperClass:"mb-4",label:"Password",type:"password",size:"lg",name:"password",value:s.password,onChange:b}),j&&(0,m.jsx)("div",{className:"d-flex justify-content-between mb-4",children:(0,m.jsx)("p",{className:"text-danger",children:j})}),(0,m.jsx)(u.$v,{type:"submit",disabled:!(""!==s.password.trim()&&""!==s.email.trim()),onClick:k,className:"mb-4 w-100 bg-dark",size:"lg",children:"Log In"})]})})]})]})]})}var g=n(4395),Z=n(4663),j=n(890),v=n(4554),b=n(3044),k=n(5422),w=n(7865),y=n(2278),C=n(5519);function P(){var e=(0,a.useState)(!1),t=(0,d.Z)(e,2),n=t[0],s=t[1],c=(0,i.I0)(),l=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.Z.get("worker/auth/logout");case 2:c({type:"refresh"});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,m.jsx)(g.Z,{style:{backgroundColor:C.Z[100],boxShadow:"0px 0px 10px 3px RGBA(233, 233, 233, 0.9)"},position:"sticky",children:(0,m.jsxs)(u.L5,{children:[(0,m.jsxs)(Z.Z,{sx:{display:"flex",justifyContent:"space-between",backgroundColor:C.Z[50],alignItems:"center"},children:[(0,m.jsx)(j.Z,{variant:"h5",noWrap:!0,sx:{fontFamily:"monospace",fontWeight:700,letterSpacing:".2rem",color:"black"},children:"AUTO PRO"}),(0,m.jsx)(v.Z,{sx:{display:"flex",alignItems:"center"},children:(0,m.jsx)("img",{src:y,alt:"User",style:{width:"40px",height:"40px",borderRadius:"50%"}})}),(0,m.jsx)(b.Z,{onClick:function(e){return s(!0)}})]}),(0,m.jsx)(k.Z,{id:"demo-positioned-menu","aria-labelledby":"demo-positioned-button",open:n,onClose:function(e){return s(!1)},anchorReference:"anchorPosition",anchorPosition:{top:40,left:1450},anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,m.jsx)(w.Z,{onClick:l,children:"Logout"})})]})})}var z=n(6934),S=n(8745),W=n(618),A=n(5855),N=n(9281),D=n(5527),F=n(9836),I=n(6890),M=n(3382),R=n(1918),B=n(6151),O=n(7892),H=n.n(O),L=(n(8989),n(1684)),Y=n(5523),_=n(4454),E={position:"absolute",display:"flex",flexDirection:"column",justifyContent:"space-between",gap:3,top:"40%",left:"50%",transform:"translate(-50%, -50%)",width:300,minHeight:300,bgcolor:"background.paper",boxShadow:24,p:1};function T(e){var t=e.handleClose,n=e.open,s=e.item,i=new Date,c=H()(i).format("DD-MM-YYYY"),u=a.useState({pickup:!1,delivery:!1}),p=(0,d.Z)(u,2),f=p[0],g=p[1],Z=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(n,o){var a,s,i,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Waiting For Pickup"!==o){e.next=8;break}return e.next=3,h.Z.patch("worker/view-bookings",{status:"Vehicle Picked Up",id:n});case 3:a=e.sent,(s=a.data).err?x.Am.error(s.message):(x.Am.success(s.message),t()),e.next=14;break;case 8:if("Paid"!==o){e.next=14;break}return e.next=11,h.Z.patch("worker/view-bookings",{status:"Delivered",id:n});case 11:i=e.sent,(c=i.data).err?x.Am.error(c.message):(x.Am.success(c.message),t());case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return(0,m.jsx)(L.Z,{open:n,onClose:t,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,m.jsxs)(v.Z,{sx:E,children:[(0,m.jsx)(v.Z,{textAlign:"center",children:(0,m.jsx)(j.Z,{variant:"h5",fontWeight:500,children:"Details"})}),(0,m.jsxs)(v.Z,{textAlign:"center",children:[(0,m.jsx)(j.Z,{fontWeight:500,gutterBottom:!0,color:"black",children:s.vehicleName}),(0,m.jsx)(j.Z,{fontWeight:500,gutterBottom:!0,color:"black",children:s.brand}),(0,m.jsx)(j.Z,{fontWeight:500,gutterBottom:!0,color:"black",children:s.vehicleNumber}),(0,m.jsx)(j.Z,{fontWeight:500,gutterBottom:!0,color:"black",children:s.place}),(0,m.jsx)(j.Z,{fontWeight:500,color:"black",children:s.address})]}),s.date===c&&"Waiting For Pickup"===s.status&&(0,m.jsx)(v.Z,{display:"flex",justifyContent:"center",children:(0,m.jsx)(Y.Z,{onChange:function(e){e.target.checked?g((function(e){return(0,l.Z)((0,l.Z)({},e),{},{pickup:!0})})):g((function(e){return(0,l.Z)((0,l.Z)({},e),{},{pickup:!1})}))},control:(0,m.jsx)(_.Z,{}),label:"Proceed PickUp"})}),"Paid"===s.status&&(0,m.jsx)(v.Z,{display:"flex",justifyContent:"center",children:(0,m.jsx)(Y.Z,{onChange:function(e){e.target.checked?g((function(e){return(0,l.Z)((0,l.Z)({},e),{},{delivery:!0})})):g((function(e){return(0,l.Z)((0,l.Z)({},e),{},{delivery:!1})}))},control:(0,m.jsx)(_.Z,{}),label:"Delivery Completed"})}),(0,m.jsx)(v.Z,{display:"flex",justifyContent:"center",children:(0,m.jsx)(B.Z,{onClick:f.delivery||f.pickup?function(){return Z(s._id,s.status)}:t,type:"button",variant:"contained",sx:{color:"white",bgcolor:"black"},children:f.delivery||f.pickup?"Save":"Close"})})]})})}var U={imgContainer:{display:"flex",justifyContent:"center"},img:{maxWidth:"100%",maxHeight:"100px"},iconContainer:{display:"flex",justifyContent:"center",gap:"8px"}},K=(0,z.ZP)(S.Z)((function(e){var t,n=e.theme;return t={},(0,c.Z)(t,"&.".concat(W.Z.head),{backgroundColor:n.palette.common.black,color:n.palette.common.white}),(0,c.Z)(t,"&.".concat(W.Z.body),{fontSize:14,fontWeight:500}),t})),V=(0,z.ZP)(A.Z)((function(e){return{"&:nth-of-type(odd)":{backgroundColor:e.theme.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}}));function q(e){var t=e.bookings,n=e.rowHeads,r=new Date,o=H()(r).format("DD-MM-YYYY"),s=a.useState(!1),i=(0,d.Z)(s,2),c=i[0],l=i[1],u=a.useState([]),p=(0,d.Z)(u,2),h=p[0],f=p[1];return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(x.x7,{}),(0,m.jsx)(N.Z,{component:D.Z,children:(0,m.jsxs)(F.Z,{sx:{minWidth:700},"aria-label":"customized table",children:[(0,m.jsx)(I.Z,{children:(0,m.jsx)(A.Z,{children:n&&n.map((function(e,t){return(0,m.jsx)(K,{align:"center",children:e},t)}))})}),(0,m.jsx)(M.Z,{children:t&&t.map((function(e,n){return(0,m.jsxs)(V,{children:[(0,m.jsx)(K,{component:"th",scope:"row",align:"center",children:n+1}),(0,m.jsx)(K,{align:"center",children:e.date}),(0,m.jsx)(K,{align:"center",children:e.place}),e.date===o&&"Waiting For Pickup"===e.status?(0,m.jsx)(K,{align:"center",children:(0,m.jsx)(R.Z,{label:"Pickup Scheduled Today",color:"error"})}):(0,m.jsx)(K,{align:"center",children:(0,m.jsx)(R.Z,{label:e.status,color:"success"})}),(0,m.jsx)(K,{align:"center",children:(0,m.jsx)(v.Z,{style:U.iconContainer,children:(0,m.jsx)(B.Z,{onClick:function(){return function(e){var n=t.find((function(t){return t._id===e}));f(n),l(!0)}(e._id)},children:"Details"})})})]},n)}))})]})}),(0,m.jsx)(T,{open:c,handleClose:function(){l(!1)},item:h})]})}var G=n(9164);function $(){var e=a.useState([]),t=(0,d.Z)(e,2),n=t[0],s=t[1];return a.useEffect((function(){(0,o.Z)((0,r.Z)().mark((function e(){var t,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.Z.get("worker/view-bookings");case 2:t=e.sent,(n=t.data).err?x.Am.error(n.message):s(n.bookings);case 5:case"end":return e.stop()}}),e)})))()}),[]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(P,{}),(0,m.jsx)(x.x7,{}),(0,m.jsx)(G.Z,{sx:{mt:5},children:(0,m.jsx)(q,{bookings:n,rowHeads:["No","Date","Place","Status","Action"]})})]})}var J=n(6134);function Q(){var e=(0,i.v9)((function(e){return e})),t=e.worker,n=e.refresh;console.log(t);var c=(0,i.I0)();return a.useEffect((function(){(0,o.Z)((0,r.Z)().mark((function e(){var t,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.Z.get("/worker/auth/checkLogin");case 2:t=e.sent,n=t.data,console.log(n),c({type:"worker",payload:{login:n.loggedIn,details:n.worker}});case 6:case"end":return e.stop()}}),e)})))()}),[n]),(0,m.jsxs)(s.Z5,{children:[t.login&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(s.AW,{path:"/",element:(0,m.jsx)($,{})}),(0,m.jsx)(s.AW,{path:"/login",element:(0,m.jsx)(s.Fg,{to:"/worker/"})})]}),!1===t.login&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(s.AW,{path:"/login",element:(0,m.jsx)(f,{})}),(0,m.jsx)(s.AW,{path:"/",element:(0,m.jsx)(s.Fg,{to:"/worker/login"})})]}),null!==t.login&&(0,m.jsx)(s.AW,{path:"/*",element:(0,m.jsx)(J.Z,{})})]})}},6134:function(e,t,n){n.d(t,{Z:function(){return s}});n(2791);var r=n(7689),o=n(1087),a=n(184);function s(){(0,r.s0)();return(0,a.jsxs)("div",{className:"body",children:[(0,a.jsx)("div",{class:"mars"}),(0,a.jsx)("img",{src:"https://assets.codepen.io/1538474/404.svg",class:"logo-404"}),(0,a.jsx)("img",{src:"https://assets.codepen.io/1538474/meteor.svg",class:"meteor"}),(0,a.jsx)("p",{class:"title",children:"Oh no!!"}),(0,a.jsxs)("p",{class:"subtitle",children:["You\u2019re either misspelling the URL ",(0,a.jsx)("br",{})," or requesting a page that's no longer here."]}),(0,a.jsx)("div",{align:"center",children:(0,a.jsx)(o.rU,{to:"/",class:"btn-back",children:"Back to previous page"})}),(0,a.jsx)("img",{src:"https://assets.codepen.io/1538474/astronaut.svg",class:"astronaut"}),(0,a.jsx)("img",{src:"https://assets.codepen.io/1538474/spaceship.svg",class:"spaceship"})]})}},4454:function(e,t,n){n.d(t,{Z:function(){return S}});var r=n(4942),o=n(3366),a=n(7462),s=n(2791),i=n(9278),c=n(4419),l=n(2065),d=n(7278),u=n(9201),p=n(184),h=(0,u.Z)((0,p.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),x=(0,u.Z)((0,p.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),m=(0,u.Z)((0,p.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox"),f=n(4036),g=n(1402),Z=n(6934),j=n(5878),v=n(1217);function b(e){return(0,v.Z)("MuiCheckbox",e)}var k=(0,j.Z)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),w=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],y=(0,Z.ZP)(d.Z,{shouldForwardProp:function(e){return(0,Z.FO)(e)||"classes"===e},name:"MuiCheckbox",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.indeterminate&&t.indeterminate,"default"!==n.color&&t["color".concat((0,f.Z)(n.color))]]}})((function(e){var t,n=e.theme,o=e.ownerState;return(0,a.Z)({color:(n.vars||n).palette.text.secondary},!o.disableRipple&&{"&:hover":{backgroundColor:n.vars?"rgba(".concat("default"===o.color?n.vars.palette.action.activeChannel:n.vars.palette.primary.mainChannel," / ").concat(n.vars.palette.action.hoverOpacity,")"):(0,l.Fq)("default"===o.color?n.palette.action.active:n.palette[o.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==o.color&&(t={},(0,r.Z)(t,"&.".concat(k.checked,", &.").concat(k.indeterminate),{color:(n.vars||n).palette[o.color].main}),(0,r.Z)(t,"&.".concat(k.disabled),{color:(n.vars||n).palette.action.disabled}),t))})),C=(0,p.jsx)(x,{}),P=(0,p.jsx)(h,{}),z=(0,p.jsx)(m,{}),S=s.forwardRef((function(e,t){var n,r,l=(0,g.Z)({props:e,name:"MuiCheckbox"}),d=l.checkedIcon,u=void 0===d?C:d,h=l.color,x=void 0===h?"primary":h,m=l.icon,Z=void 0===m?P:m,j=l.indeterminate,v=void 0!==j&&j,k=l.indeterminateIcon,S=void 0===k?z:k,W=l.inputProps,A=l.size,N=void 0===A?"medium":A,D=l.className,F=(0,o.Z)(l,w),I=v?S:Z,M=v?S:u,R=(0,a.Z)({},l,{color:x,indeterminate:v,size:N}),B=function(e){var t=e.classes,n=e.indeterminate,r=e.color,o=e.size,s={root:["root",n&&"indeterminate","color".concat((0,f.Z)(r)),"size".concat((0,f.Z)(o))]},i=(0,c.Z)(s,b,t);return(0,a.Z)({},t,i)}(R);return(0,p.jsx)(y,(0,a.Z)({type:"checkbox",inputProps:(0,a.Z)({"data-indeterminate":v},W),icon:s.cloneElement(I,{fontSize:null!=(n=I.props.fontSize)?n:N}),checkedIcon:s.cloneElement(M,{fontSize:null!=(r=M.props.fontSize)?r:N}),ownerState:R,ref:t,className:(0,i.Z)(B.root,D)},F,{classes:B}))}))},6672:function(){},9071:function(e,t,n){e.exports=n.p+"static/media/Admin.f5f422ea377fe6938fd3.png"},2278:function(e,t,n){e.exports=n.p+"static/media/AutoPro-logos_black.3d7b4a3910bc6cc0ef70.png"}}]);
//# sourceMappingURL=787.fd7fd8a6.chunk.js.map